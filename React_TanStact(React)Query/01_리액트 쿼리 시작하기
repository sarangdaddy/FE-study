# ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬

## ì™œ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬?

- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” `ì„œë²„ ìƒíƒœ`ê´€ë¦¬ë¥¼ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.
- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ë¡œ `ì„œë²„ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°`, `ìºì‹±`, `ë™ê¸°í™” ë° ì—…ë°ì´íŠ¸`ë¥¼ ë³´ë‹¤ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ê¸°ì¡´ì˜ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ `redux`, `mobX`ì—ì„œë„ ì„œë²„ ìƒíƒœ ê´€ë¦¬ê°€ ê°€ëŠ¥í–ˆì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ì—ë§Œ ë”ìš± ì í•©í•˜ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ìƒíƒœì™€ ì„œë²„ ìƒíƒœë¥¼ ë¶„ë¦¬í•˜ì—¬ ì„œë²„ ìƒíƒœ ê´€ë¦¬ëŠ” ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„œ ê´€ë¦¬í•¨ì´ ì¢‹ë‹¤.

## ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ê°€ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥

- ë°ì´í„° ìºì‹±
- ë™ì¼í•œ ë°ì´í„°ì— ëŒ€í•œ ì¤‘ë³µ ìš”ì²­ì„ ë‹¨ì¼ ìš”ì²­ìœ¼ë¡œ í†µí•©
- ì˜¤ë˜ëœ ë°ì´í„° ìë™ ì—…ë°ì´íŠ¸
- ë°ì´í„°ì˜ ìœ íš¨ì„± íŒë‹¨
- í˜ì´ì§€ë„¤ì´ì…˜ ë° ë°ì´í„° ì§€ì—° ë¡œë“œì™€ ê°™ì€ ì„±ëŠ¥ ìµœì í™”
- ì„œë²„ ìƒíƒœì˜ ë©”ëª¨ë¦¬ ë° ê°€ë¹„ì§€ ìˆ˜ì§‘ ê´€ë¦¬
- êµ¬ì¡° ê³µìœ ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë©”ëª¨í™”

## ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ê¸°ë³¸ ì½”ë“œ ì‚´í´ë³´ê¸°

```tsx
import {
  QueryClient,
  QueryClientProvider,
  useQuery,
} from '@tanstack/react-query'

const queryClient = new QueryClient()

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  )
}

function Example() {
  const { isPending, error, data } = useQuery({
    queryKey: ['repoData'],
    queryFn: () =>
      fetch('https://api.github.com/repos/TanStack/query').then(
        (res) => res.json(),
      ),
  })

  if (isPending) return 'Loading...'

  if (error) return 'An error has occurred: ' + error.message

  return (
    <div>
      <h1>{data.name}</h1>
      <p>{data.description}</p>
      <strong>ğŸ‘€ {data.subscribers_count}</strong>{' '}
      <strong>âœ¨ {data.stargazers_count}</strong>{' '}
      <strong>ğŸ´ {data.forks_count}</strong>
    </div>
  )
}
```

### 1. ê¸°ë³¸ ì„¤ì •

```tsx
// v4
import { QueryClient } from "@tanstack/react-query";

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: Infinity,
      // ...
    },
  },
});
```

- QueryClientë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹œì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆë‹¤.
- QueryClientì—ì„œ ëª¨ë“  `query` ë˜ëŠ” `mutation`ì— ê¸°ë³¸ ì˜µì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

### 2. ì „ì—­ì— QueryClient ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •

```tsx
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const queryClient = new QueryClient({ /* options */});

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  )
}
```

- ìµœìƒë‹¨ ì•±ì„ `QueryClientProviderë¡œ` ê°ì‹¸ì¤€ë‹¤.
- QueryClientProviderì— ì‚¬ìš©í•  QueryClient ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•œë‹¤.

### 3. devtools ì„¤ì •

```bash
$ npm i @tanstack/react-query-devtools
# or
$ pnpm add @tanstack/react-query-devtools
# or
$ yarn add @tanstack/react-query-devtools
```

- ìš°ì„  ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.

```tsx
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      {/* The rest of your application */}
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  )
}
```

- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” ì „ìš© devtoolsë¥¼ ì œê³µí•œë‹¤.
- devtoolsë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ë‚´ë¶€ ë™ì‘ì„ ì‹œê°í™”í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤.
- devtoolsëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ process.env.NODE_ENV === 'development' ì¸ ê²½ìš°ì—ë§Œ ì‹¤í–‰ëœë‹¤.
- ë”°ë¼ì„œ ë°°í¬ ì‹œì— ì œê±°í•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.