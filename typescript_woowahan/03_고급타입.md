# 03. 고급타입

## 3.1 타입스크립트만의 독자적 타입 시스템

- 타입스크립트에는 자바스크립트 자료형에 없는 `독자적인 타입`을 가지고 있다.
- 다만, 자바스크립트로 표현할 수단과 필요성이 없었을 뿐 모두 자바스크립트에서 기인한 것이다.

### 1. any 타입

- 모든 값을 오류 없이 받을 수 있다.
- 타입스크릅트 없는 자바스크립트를 사용함과 동일하다.
- 지양해야 하는 사용방법이지만 어쩔 수 없이 사용해야하는 경우가 있다.
  - **개발 단계에서 임시로 값을 지정해야 할 때**
  - **어떤 값을 받아올지 또는 넘겨줄지 정할 수 없을 때**
  - **값을 예측할 수 없을 때 암묵적으로 사용**

### 2. unknown 타입

- 모든 타입의 값을 가질 수 있다.
- `any`를 제외한 어떤 타입의 값으로 될 수 없다.
- 위 특성으로 `unknown`은 할당은 가능하지만 실행에서 오류를 발생시킨다.
- 타입을 아직 모르는 경우 `unknown`으로 할당하고 추후에 수정해주고자 할때 유용하다.

#### 🧐 unknown은 결국 무조건 수정되어야 하는가?

- unknown은 타입 정보가 불확실하거나 미정인 상태를 나타낸다.
- 안전하게 사용하기 위해서 가능하다면 타입을 구체적으로 정의하거나 체크해야한다.
- 상황에 따라 그대로 사용할 수도 있다.

#### 🧐 강제 타입 캐스팅?

- 한 타입의 변수를 다른 타입으로 명시적으로 변환하는 과정
- `const env = process.env as unknown as ProcessEnv`

> any는 무엇이든 괜찮다.  
> unknown은 뭔지 모르지만 하나씩 테스트하면서 알아보자.

### 3. void 타입

- 함수에는 전달되는 매개변수의 타입과 반환하는 타입을 지정해야 한다.
- 매개변수를 전달하지 않는 경우네는 괄호를 비우면되는데 아무것도 반환하지 않는다면?
- 이 경우 void 타입을 사용한다.

### 4. never 타입

- never도 함수와 많이 사용되는 타입이다.
- 값을 반환할 수 `없는` 타입으로 사용된다.
  - 에러를 던지는 경우 (특정 함수가 에러를 반환하면 반환 타입은 never)
  - 무한히 함수가 실행되는 경우

### 5. Array 타입

- 자바스크립트에서 배열은 객체이기에 타입스크립트에서 배열 타입이 따로 필요하다.
- 기존의 자바스크립트 배열은 어떤 원소든 배열에 존재할 수 있었다. `ex) [1, "a", null]`
- 타입스크립트는 정적 타입을 강제하기 위해 배열타입에 원소 타입까지 강제한다.
- `number[]` or `Array<number>` 두 방법 모두 동일하다.
- 여러 타입의 원소를 허용하고자 한다면 유니온 타입을 사용한다. `(number | string)[]` or `Array<number | string>`

#### tuple 튜플

- 타입스크립트 배열타입에는 보다 좁은 타입을 정의할 수 있는 튜플이 존재한다.

```ts
let tuple: [number] = [1];
tuple = [1, 2]; // 불가능
tuple = [1, "string"]; // 불가능

let tuple: [number, string, boolean] = [1, "string", true]; // 여러 타입과 혼합 가능
```

> 튜플은 배열의 원소 개수를 제한할 수 있다.  
> 튜플은 배열의 원소 순서 타입을 제한할 수 있다.

```ts
// 튜플과 배열을 혼합해서 특정 인덱스는 강제하고 나머지는 제한 없도록 하는 방법
const httpStatusFromPaths = [number, string, ...string[]] = [
    400,
    "Bad Request".
    "/users/:id".
    "/users/:userId",
]

// 옵셔널 프로터티를 명시해서 특정 인덱스 요소는 있어도 되고 없어도 되고
const optionalTuple1 : [number, number, number?] = [1,2];
const optionalTuple2 : [number, number, number?] = [1,2,3];
```

### 6. enum 타입

- enum은 열거형이라고도 불리며 구조체를 만드는 타입 시스템이다.
- 주로 문자열 상수를 생성하는데 사용된다.
- 문자열 인자의 안정성과 가독성을 높여준다.

```ts
enum ProgrammingLanguage {
  TypeScript = "TypeScript",
  Java = 300,
  Rust, // 301,
  Go, // 302
}

ProgrammingLanguage.Go; // 302
// 역방향도 가능
ProgrammingLanguage[300]; // Java
```

- 다만, 역방향의 경우 존재하지 않는 경우를 찾더라도 에러가 발생하지 않는다.
- 이때는 const enum으로 열거형을 선언하면 방지할 수 있다.

```ts
ProgrammingLanguage[200] // undefined 에러 발생 X

// 역방향 존재하지 않는 경우 에러 발생을 위한 방법
const enum ProgrammingLanguage {
    ...
}
```

## 3.2 타입 조합

### 1. 교차 타입

- 여러 가지 타입을 결합하여 하나의 단일 타입으로 만든다.

```ts
type Item = {
  id: number;
  name: string;
};

type ItemWithPrice = Item & { price: number };
```

### 2. 유니온 타입

- 교차 타입이 `A and B`를 모두 만족한다면 유니온은 `A or B`다.

### 3. 인덱스 시그니처

- 특정 타입의 속성 이름은 알 수 없지만 속성값의 타입을 알고 있을 때 사용한다.

```ts
// 해당 타입의 속성 키는 모두 string 타입이고 속성값은 모두 number를 가진다.
interface IndexSignature {
  [key: string]: number;
}
```

### 4. 인덱스트 엑세스 타입

- 다른 타입의 특정 속성이 가지는 타입을 조회하기 위해 사용된다.
- 특정 배열 요소의 타입을 가져올 수 있다.

```ts
const PromotionList = [
  { type: "product", name: "chicken" },
  { type: "product", name: "pizza" },
  { type: "card", name: "cheer-up" },
];

type ElementOf<T> = (typeof T)[number];
type PromotionItemType = ElementOf<PromotionList>;
// type PromotionItemType = {type : string; name : string}
```
