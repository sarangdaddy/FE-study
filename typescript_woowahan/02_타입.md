# 02. 타입

## 2.1 타입이란?

1. 자료형으로서의 타입

- 자바스크립트는 7가지 데이터 타입(자료형)을 가진다.
- `undefined`, `null`, `boolean`, `String`, `Symbol`, `Numeric`(Number, Bigint), `Object`
- 타입이 구분된 이유는 값의 종류를 명시하고 메모리를 효율적으로 사용하기 위해서다.
- 프로그래밍 언어는 변수를 선언하는 것부터 시작하는데
- 변수란 값을 저장할 수 있는 공간(메모리)를 가리키는 이름이다.
- 타입을 사용함으로써 컴퓨터는 변수의 종류와 크기를 미리 계산해서 공간(메모리)를 할당할 수 있다.

2. 집합으로서의 타입

- 위에서 설명한 7가지 타입은 집합과 유사하다.
- Number라는 타입은 숫자들의 집합처럼 생각하면 된다.
- 타입을 명시하지 않는다고 생각하면 숫자만 필요한 집합에 다른 타입이 들어와서 문제를 발생시킬 수 있다.
- 타입스크립트를 사용하면 이러한 문제를 컴파일 단게에서 발견할 수 있다.

3. 정적 타입과 동적 타입

- 정적 타입인 타입스크립트는 코드 작성단계에서 타입을 정의해야한다.
- 동적 타입인 자바스크립트는 코드 작성단게에서 타입을 정의할 필요가 없다.
- 그렇다고 자바스크립트에 타입이 존재하는 것이 아니다.
- 타입 에러로 인한 문제를 컴파일 단계에서 발견하는지 런타임 단계에서 발견하는지의 차이다.
- 컴파일 단계에서의 발견이 발생 원인 판단에 용이하고 전체적인 프로그램의 안전성을 높여준다.

> 컴파일 : 컴퓨터가 소스코드를 이해할 수 있도록 기계어로 변환되는 시점  
> 런타임 : 기계어로 변환된 파일이 메모리에 적재되어 실행되는 시점

4. 강타입과 약타입

- 앞서 이야기 했듯이 타입이 결정되는 시기가 다를 뿐 모든 프로그래밍 언어는 타입이 존재한다.
- 자바스크립트에서는 코드 작성에서 타입을 명시하지 않지만 런타임 단계에서 자동으로 타입을 정한다.
- 이를 `암묵적 타입 변환`이라하며 `약타입`으로 분류된다.
- `약타입` 언어는 `string`과 `number`라는 다른 타입을 연산하면 내부에서 타입을 자동으로 변경하고 계산한다.
- `강타입` 언어에서는 다른 타입의 연산 시도에서 에러를 발생시킨다.
- 자바스크립트는 약타입 언어이며 타입스크립트는 강타입 언어다.
- 자동으로 타입을 정해주고 에러도 발생하지 않는다면 편하다고 생각할 수 있지만,
- 개발자의 의도와 다른 결과를 보여주고 에러 여부까지 알려주지 않는다면 큰 문제의 원인이 될 수 있다.

5. 컴파일 방식

- 컴파일이란 컴퓨가가 이해하는 바이너리 코드로 변환해주는것을 의미하는데,
- 타입스크립트의 컴파일러 결과는 자바스크립트 언어다.
- 타입스크립트는 특정 언어가 아닌 자바스크립트에 타입이라는 레이어를 얹은 확장언어로 이해할 수 있다.

## 2.2 타입스크립트의 타입 시스템

- 타입을 명시하는 방식에는 `명목적 타이핑` 방식과 `구조적 타이핑` 방식이 존재한다.
- 명목적 타이핑 방식에서는 변수가 같은 이름의 데이터 타입으로 선언된 경우에만 호환된다.
- 구조적 타이핑 방식에서는 타입 구조가 동일하다면 호환가능하다.

```java
// 명목적 타이핑 (java)
class Cat {
    String name;
        public void hit() {}

class Arrow {
    String name;
    public void hit(){}
}

public class main {
    public static void main(String[] args) {
        Arrow cat = new Cat(); // Error : incompatible types
        Cat arrow = new Arrow(); // Error : incompatible types
    }
}
}
```

```ts
// 구조적 타이핑 (타입스크립트)
class Cat {
  name: string;
  hit(): void {}
}

class Arrow {
  name: string;
  hit(): void {}
}

// 구조적 타이핑에 의해, 이 할당은 유효하다.
let cat: Arrow = new Cat(); // No error
let arrow: Cat = new Arrow(); // No error
```

- 명목적 타이핑이 구조적 타이핑에 비해 조금 더 안전하다.
- 하지만 타입스크립트는 자바스크립트를 모델링한 언어이기 때문에 구조적 타이핑을 가진다.
- 이는 자바스크립트가 본질적으로 덕 타이핑을 기반으로 하기 때문이다.

> 덕 타이핑 : 어떤 함수의 매개변수값이 올바르게 주어진다면 그 값이 어떻게 만들어졌는지 신경쓰지 않는다.

### 타입스크립트에서의 값 vs 타입

- 타입스크립트에서 명시한 타입은 런타임에서는 사라지기에 자바스크립트와 충돌되지 않는다.
- 하지만 `class`와 `enum`은 값과 타입 공간 모두에 포함될 수 있다.
- 즉, 런타임에서 사라지지않고 객체로 존재한다.
- `class`와 `enum`을 타입 명시로 사용할지 값으로 사용할지 구분을 해야한다.

> const enum을 사용하면 컴파일 단계에서 해석하고 객체로 저장되지 않는다.  
> 성능에는 좋지만 타입을 위한 사용에는 일반 열거형 enum이 적합하다.
