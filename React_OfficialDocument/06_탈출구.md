# íƒˆì¶œêµ¬

ì»´í¬ë„ŒíŠ¸ ì¤‘ ì¼ë¶€ëŠ” React ì™¸ë¶€ì˜ ì‹œìŠ¤í…œì„ ì œì–´í•˜ê³  ë™ê¸°í™”í•´ì•¼ í•  ìˆ˜ ìˆë‹¤.

- ë¸Œë¼ìš°ì € APIë¥¼ ì‚¬ìš©í•´ inputì— ì´ˆì ì„ ë§ì¶”ëŠ” ê²½ìš°
- React ì—†ì´ êµ¬í˜„ëœ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ë¥¼ ì¬ìƒ ë° ì¼ì‹œì •ì§€í•˜ëŠ” ê²½ìš°
- ì›ê²© ì„œë²„ì— ì—°ê²°í•´ì„œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•´ì•¼ í•  ê²½ìš°

> Reactì˜ `ì™¸ë¶€`ë¡œ ë‚˜ê°€ì„œ ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” íƒˆì¶œêµ¬ì— ëŒ€í•´ ì•Œì•„ë³´ì.

## ì´ ì±•í„°ì—ì„œ ë‹¤ë£° ë‚´ìš©

- ë¦¬ë Œë”ë§í•˜ì§€ ì•Šê³  ì •ë³´ë¥¼ â€œê¸°ì–µâ€í•˜ëŠ” ë°©ë²•
- Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ì—˜ë¦¬ë¨¼íŠ¸ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•
- ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•
- ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ Effectë¥¼ ì œê±°í•˜ëŠ” ë°©ë²•
- effectì˜ ìƒëª…ì£¼ê¸°ê°€ ì»´í¬ë„ŒíŠ¸ì™€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€
- ì¼ë¶€ ê°’ì´ Effectë¥¼ ë‹¤ì‹œ ì´‰ë°œí•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ë°©ë²•
- Effect ì¬ì‹¤í–‰ ë¹ˆë„ë¥¼ ì¤„ì´ëŠ” ë°©ë²•
- ì»´í¬ë„ŒíŠ¸ ê°„ ë¡œì§ì„ ê³µìœ í•˜ëŠ” ë°©ë²•

</br>

# refë¡œ ê°’ ì°¸ì¡°í•˜ê¸°

- ì»´í¬ë„ŒíŠ¸ê°€ íŠ¹ì • ì •ë³´ë¥¼ `ê¸°ì–µ` í•˜ë„ë¡ í•˜ê³  ì‹¶ì§€ë§Œ í•´ë‹¹ ì •ê³ ê°€ `ìƒˆ ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ ì•Šë„ë¡` í•˜ë ¤ëŠ” ê²½ìš° refë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ì»´í¬ë„ŒíŠ¸ì— ref ì¶”ê°€í•˜ê¸°

1. useRef í›…ì„ ê°€ì ¸ì˜¨ë‹¤.

```jsx
import { useRef } from "react";
```

2. useRef í˜¹ì„ í˜¸ì¶œí•˜ê³  ì°¸ì¡°í•  ì´ˆê¸°ë°§ì„ ì¸ìë¡œ ì „ë‹¬í•œë‹¤.

```jsx
const ref = useRef(0);
```

3. useRefëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

```json
{
  "current": 0 // The value you passed to useRef
}
```

- ref.current ì†ì„±ì„ í†µí•´ í•´ë‹¹ refì˜ í˜„ì¬ ê°’ì— ì—‘ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤.
- ì´ ê°’ì€ ì½ê¸°ì™€ ì“°ê¸°ê°€ ëª¨ë‘ ê°€ëŠ¥í•˜ë‹¤.

```jsx
import { useRef } from "react";

export default function Counter() {
  let ref = useRef(0);

  function handleClick() {
    ref.current = ref.current + 1;
    alert("You clicked " + ref.current + " times!");
  }

  return <button onClick={handleClick}>Click me!</button>;
}
```

> `ref`ëŠ” Reactê°€ ì¶”ì í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ì˜ `ë¹„ë°€ ì£¼ë¨¸ë‹ˆ`ì™€ ê°™ë‹¤.

- refëŠ” ìˆ«ì ë¿ë§Œì´ ì•„ë‹Œ stateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¬¸ìì—´, ê°ì²´, í•¨ìˆ˜ ë“± ë¬´ì—‡ì´ë“  ê°€ë¦¬í‚¬ ìˆ˜ ìˆë‹¤.
- refëŠ” current ì†ì„±ì„ ì½ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ JavaScript ê°ì²´ë‹¤.
- **refëŠ” stateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê°’ì„ ìœ ì§€í•˜ë©´ì„œ stateì™€ëŠ” ë‹¤ë¥´ê²Œ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤.**

## stateì™€ ref í•¨ê»˜ ì‚¬ìš©í•˜ê¸° (ìŠ¤í†±ì›Œì¹˜)

```jsx
import { useState, useRef } from "react";

export default function Stopwatch() {
  // ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë Œë”ë§ ë˜ì–´ì•¼í•˜ëŠ” ì‹œê°„ì€ stateë¡œ ê´€ë¦¬í•œë‹¤.
  const [startTime, setStartTime] = useState(null);
  const [now, setNow] = useState(null);

  // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ê³¼ëŠ” ìƒê´€ ì—†ì§€ë§Œ ê¸°ì–µí•´ì•¼í•˜ëŠ” interval IDëŠ” refë¡œ ê´€ë¦¬í•œë‹¤.
  const intervalRef = useRef(null);

  function handleStart() {
    setStartTime(Date.now());
    setNow(Date.now());

    // setIntervalì´ í˜¸ì¶œí•œ interval IDë¥¼ clearInterval()ì— ì œê³µ
    clearInterval(intervalRef.current);
    intervalRef.current = setInterval(() => {
      setNow(Date.now());
    }, 10);
  }

  function handleStop() {
    // setIntervalì´ í˜¸ì¶œí•œ interval IDë¥¼ clearInterval()ì— ì œê³µ
    clearInterval(intervalRef.current);
  }

  let secondsPassed = 0;
  if (startTime != null && now != null) {
    secondsPassed = (now - startTime) / 1000;
  }

  return (
    <>
      <h1>Time passed: {secondsPassed.toFixed(3)}</h1>
      <button onClick={handleStart}>Start</button>
      <button onClick={handleStop}>Stop</button>
    </>
  );
}
```

- ë Œë”ë§ì— ì •ë³´ê°€ ì‚¬ìš©ë˜ëŠ” ê²½ìš° í•´ë‹¹ ì •ë³´ë¥¼ stateë¡œ ìœ ì§€í•œë‹¤.
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œ ì •ë³´ë¥¼ í•„ìš”ë¡œ í•˜ê³  ë³€ê²½í•´ë„ ë‹¤ì‹œ ë Œë”ë§í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš° refë¥¼ ì‚¬ìš©í•œë‹¤.

## refì™€ stateì˜ ì°¨ì´ì 

| refs                                                                       | state                                                                                         |
| -------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| useRef(initialValue)ëŠ” { current: initialValue }ì„ ë°˜í™˜                    | useState(initialValue)ëŠ” state ë³€ìˆ˜ì˜ í˜„ì¬ê°’ê³¼ state ì„¤ì •ìí•¨ìˆ˜([value, setValue])ë¥¼ ë°˜í™˜     |
| ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ ì•ŠìŒ                                           | ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§ì„ ì´‰ë°œí•¨                                                                     |
| Mutableâ€” ë Œë”ë§ í”„ë¡œì„¸ìŠ¤ ì™¸ë¶€ì—ì„œ current ê°’ì„ ìˆ˜ì •í•˜ê³  ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŒ | â€œImmutableâ€â€” state setting í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ state ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë¦¬ë Œë”ë§ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•´ì•¼í•¨ |
| ë Œë”ë§ ì¤‘ì—ëŠ” current ê°’ì„ ì½ê±°ë‚˜ ì“°ì§€ ì•Šì•„ì•¼ í•¨                           | ì–¸ì œë“ ì§€ stateë¥¼ ì½ì„ ìˆ˜ ìˆìŒ. ê° ë Œë”ë§ì—ëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ” ìì²´ state snapshotì´ ìˆìŒ         |

## refëŠ” ì„¤ì •ìê°€ ì—†ëŠ” ì¼ë°˜ state ë³€ìˆ˜ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

```jsx
// Inside of React
function useRef(initialValue) {
  const [ref, unused] = useState({ current: initialValue });
  return ref;
}
```

## refë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°

refëŠ” ì»´í¬ë„ŒíŠ¸ê°€ Reactë¡œë¶€í„° `ì™¸ë¶€ë¡œ ë‚˜ê°€ì„œ` ì™¸ë¶€ API, ì¦‰ ì»´í¬ë„ŒíŠ¸ì˜ í˜•ìƒì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì € API ë“±ê³¼ í†µì‹ í•´ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤.

- timeout ID ì €ì¥
- ë‹¤ìŒ í˜ì´ì§€ì—ì„œ ë‹¤ë£° DOM elements ì €ì¥ ë° ì¡°ì‘
- JSXë¥¼ ê³„ì‚°í•˜ëŠ” ë° í•„ìš”í•˜ì§€ ì•Šì€ ë‹¤ë¥¸ ê°ì²´ ì €ì¥

> ì»´í¬ë„ŒíŠ¸ì— ì¼ë¶€ ê°’ì„ ì €ì¥í•´ì•¼ í•˜ì§€ë§Œ ë Œë”ë§ ë¡œì§ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.

## ref ëª¨ë²” ì‚¬ë¡€

- refë¥¼ íƒˆì¶œêµ¬(ì™¸ë¶€ ì‹œìŠ¤í…œ, API ì‘ì—…)ë¡œ ì·¨ê¸‰í•˜ì.
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ê³¼ ë°ì´í„° íë¦„ì—ëŠ” ì‚¬ìš©ì„ ì¡°ì‹¬í•˜ì.
- ë Œë”ë§ ì¤‘ì—ëŠ” ref.currentë¥¼ ì½ê±°ë‚˜ ì“°ì§€ ë§ì.(ì²« ë²ˆì§¸ ë Œë”ë§ì—ë§Œ ì‚¬ìš©)
- â“ë Œë”ë§ ì¤‘ì´ë¼ëŠ” ê²ƒì€ ì²« ë§ˆìš´íŠ¸ ì œì™¸í•˜ê³  ë¦¬ëœë”ë§ì˜ ê²½ìš°ë¥¼ ë§í•˜ëŠ” ê±´ê°€?

> stateëŠ” ëª¨ë“  ë Œë”ë§ì—ì„œ ìŠ¤ëƒ…ìƒ·ì²˜ëŸ¼ ì‘ë™í•˜ë©° ë™ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ì§€ ì•Šì§€ë§Œ refëŠ” ê°’ì„ ë³€ê²½í•˜ëŠ” ì¦‰ì‹œ ë³€ê²½ëœë‹¤.

</br>

# refë¡œ DOM ì¡°ì‘í•˜ê¸°

- ReactëŠ” ë Œë”ë§ ì¶œë ¥ê³¼ ì¼ì¹˜í•˜ë„ë¡ DOMì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.
- í•˜ì§€ë§Œ ë…¸ë“œì— ì´ˆì ì„ ë§ì¶”ê±°ë‚˜ ìŠ¤í¬ë¡¤í•˜ê±°ë‚˜ í¬ê¸°ì™€ ìœ„ì¹˜ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ Reactê°€ ê´€ë¦¬í•˜ëŠ” DOMìš”ì†Œì— ì ‘ê·¼í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤.
- DOMë…¸ë“œì— ëŒ€í•œ refë¥¼ ë§Œë“¤ì–´ì„œ ì ‘ê·¼í•œë‹¤.

## ë…¸ë“œì— ëŒ€í•œ ref ê°€ì ¸ì˜¤ê¸°

1. useRef í›…ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.

```jsx
import { useRef } from "react";
```

2. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ refë¥¼ ì„ ì–¸í•œë‹¤.

```jsx
const myRef = useRef(null);
```

3. **DOM ë…¸ë“œë¥¼ ê°€ì ¸ì˜¬ JSX íƒœê·¸ì— ref ì†ì„±ìœ¼ë¡œ ì°¸ì¡°ë¥¼ ì „ë‹¬í•œë‹¤.**

```jsx
<div ref={myRef}>
```

- useRef í›…ì€ currentë¼ê³  í•˜ëŠ” í”„ë¡œí¼í‹°ê°€ í¬í•¨ëœ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- ì²˜ìŒ myRef.currentëŠ” nullì„ ê°€ì§„ë‹¤.
- Reactê°€ `<div>`ì— ëŒ€í•œ DOM ë…¸ë“œë¥¼ ìƒì„±í•˜ë©´, useRef.currentì— ë…¸ë“œê°€ ë“¤ì–´ê°„ë‹¤.
- ë…¸ë“œë¥¼ ê°€ì§„ useRef.currentëŠ” ë¹ŒíŠ¸ì¸ ë¸Œë¼ìš°ì„œ API ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

```jsx
// ëª¨ë“  ë¸Œë¼ìš°ì € APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:
myRef.current.scrollIntoView();
```

## í…ìŠ¤íŠ¸ inputì— ì´ˆì  ë§ì¶”ê¸°

```jsx
import { useRef } from "react";

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      // ë…¸ë“œì— ref ì „ë‹¬
      <input ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

- `<input ref={inputRef} />` inputì˜ DOM ë…¸ë“œë¥¼ `inputRef.current`ì— ë„£ëŠ”ë‹¤.
- handleClick í•¨ìˆ˜ì—ì„œ inputRef.currentë¡œë¶€í„° `input DOM ë…¸ë“œë¥¼ ì½ì–´`ì™€ì„œ inputRef.current.focus()ë¡œ `focus()ë¥¼ í˜¸ì¶œ`í•©ë‹ˆë‹¤.

## ref ì½œë°±ì„ ì‚¬ìš©í•˜ì—¬ refs ëª©ë¡ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•

í•„ìš”í•œ DOM ë…¸ë“œë¥¼ refë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•´ë´¤ë‹¤.  
í•˜ì§€ë§Œ, í•œ ëª©ë¡ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?  
**ì–¼ë§ˆë‚˜ ë§ì€ refê°€ í•„ìš”í•œì§€ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì˜ ë°©ë²•ì„ ì•Œì•„ë³´ì**

- ref ì†ì„±ì— í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ì¤€ë‹¤. ì´ë¥¼ `ref ì½œë°±`ì´ë¼ê³  í•œë‹¤.
- ReactëŠ” refë¥¼ ì„¤ì •í•  ë–„ê°€ ë˜ë©´ DOM ë…¸ë“œë¡œ, ì§€ìš¸ ë•Œê°€ ë˜ë©´ nullë¡œ ref ì½œë°±ì„ í˜¸ì¶œí•œë‹¤.
- ì´ë¥¼ í†µí•´ ìì‹ ë§Œì˜ ë°°ì—´(ì¸ë±ìŠ¤)ì´ë‚˜ Map(ID)ë¡œ ëª¨ë“  refì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```jsx
import { useRef } from "react";

export default function CatFriends() {
  const itemsRef = useRef(null);

  function scrollToId(itemId) {
    const map = getMap(); // mapìœ¼ë¡œ ì €ì¥ëœ itemsRef ê°€ì ¸ì˜¤ê¸°
    const node = map.get(itemId); // mapì•ˆì—ì„œ ì„ íƒëœ idë¡œ node ê°€ì ¸ì˜¤ê¸°
    node.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center",
    });
  }

  function getMap() {
    if (!itemsRef.current) {
      // Initialize the Map on first usage.
      itemsRef.current = new Map();
    }
    return itemsRef.current;
  }

  return (
    <>
      <nav>
        <button onClick={() => scrollToId(0)}>Tom</button>
        <button onClick={() => scrollToId(5)}>Maru</button>
        <button onClick={() => scrollToId(9)}>Jellylorum</button>
      </nav>
      <div>
        <ul>
          {catList.map((cat) => (
            <li
              key={cat.id}
              ref={(node) => {
                const map = getMap();
                if (node) {
                  map.set(cat.id, node);
                } else {
                  map.delete(cat.id);
                }
              }}
            >
              <img src={cat.imageUrl} alt={"Cat #" + cat.id} />
            </li>
          ))}
        </ul>
      </div>
    </>
  );
}

const catList = [];
for (let i = 0; i < 10; i++) {
  catList.push({
    id: i,
    imageUrl: "https://placekitten.com/250/200?image=" + i,
  });
}
```

- ìœ„ ì˜ˆì œì—ì„œ itemsRefëŠ” í•˜ë‚˜ë§Œì˜ DOM ë…¸ë“œë¥¼ ë³´ìœ í•˜ì§€ ì•ŠëŠ”ë‹¤.
- DOM ë…¸ë“œë“¤ì´ ëª¨ì—¬ìˆëŠ” Mapì„ ë³´ìœ í•œë‹¤.

```jsx
<li
  key={cat.id}
  ref={node => {
    const map = getMap();
    if (node) {
      // Add to the Map
      map.set(cat.id, node);
    } else {
      // Remove from the Map
      map.delete(cat.id);
    }
  }}
>
```

- catListì—ì„œ ë…¸ë“œë¥¼ ë§Œë“¤ë•Œ ref mapë„ ì—…ë°ì´íŠ¸ ëœë‹¤.

## ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ DOM ë…¸ë“œì— ì ‘ê·¼í•˜ê¸°

- ìœ„ ì˜ˆì œë“¤ì—ì„œëŠ” ë¹ŒíŠ¸ì¸ ì»´í¬ë„ŒíŠ¸ `<input>`, `li` ë“±ì— refë¥¼ ì£¼ì—ˆë‹¤.
- í•˜ì§€ë§Œ ë§Œë“¤ì–´ì§„ ì»´í¬ë„ŒíŠ¸(í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸)ì— refë¥¼ ë„£ìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ nullì´ ë°˜í™˜ëœë‹¤.

```jsx
import { useRef } from "react";

// ë§Œë“¤ì–´ì§„ inputì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
function MyInput(props) {
  return <input {...props} />;
}

export default function MyForm() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

```
Warning: Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?
// ê²½ê³ : í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ëŠ” refsë¥¼ ì§€ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ refì— ì ‘ê·¼í•˜ë ¤ëŠ” ì‹œë„ëŠ” ì‹¤íŒ¨í•©ë‹ˆë‹¤. React.forwardRef()ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ì…¨ë‚˜ìš”?
```

> ê¸°ë³¸ì ìœ¼ë¡œ ReactëŠ” í•œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ DOM ë…¸ë“œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì°¨ë‹¨í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

- í•´ê²°ë°©ë²•ìœ¼ë¡œëŠ” DOM ë…¸ë“œë¥¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼í•œë‹¤.
- ì´ëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° refë¥¼ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.

```jsx
const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});
```

- MyInput ì»´í¬ë„ŒíŠ¸ë¥¼ `forwardRef`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸í•˜ë©´, props ë‹¤ìŒì˜ ë‘ ë²ˆì§¸ `ref ì¸ìˆ˜`ì— ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ `inputRef`ë¥¼ ë°›ë„ë¡ ì„¤ì •í•œë‹¤.
- MyInputì€ ìˆ˜ì‹ í•œ refë¥¼ ë‚´ë¶€ì˜ `<input>`ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.

```jsx
import { forwardRef, useRef } from "react";

const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

> ìœ„ì™€ ê°™ì€ ë°©ì‹ì€ ë²„íŠ¼, ì…ë ¥ ë“±ê³¼ ê°™ì€ ì €ìˆ˜ì¤€ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## DOM ë…¸íŠ¸ ë…¸ì¶œì„ ì œí•œí•˜ê¸°

ìœ„ ì˜ˆì œì—ì„œ MyInputì€ DOM input ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë…¸ì¶œí•˜ê³  ìˆë‹¤.  
ë§Œì•½ focus()ë§Œì„ ìœ„í•´ì„œ ë…¸ì¶œì„ í•˜ë„ë¡ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ `useImperativeHandle`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
import { forwardRef, useRef, useImperativeHandle } from "react";

const MyInput = forwardRef((props, ref) => {
  const realInputRef = useRef(null);
  useImperativeHandle(ref, () => ({
    // Only expose focus and nothing else
    focus() {
      realInputRef.current.focus();
    },
  }));
  return <input {...props} ref={realInputRef} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

## Reactê°€ refë¥¼ ì²¨ë¶€í•  ë•Œ

Reactì—ì„œ ëª¨ë“  ì—…ë°ì´íŠ¸ëŠ” ë‘ ë‹¨ê³„ë¡œ ë‚˜ë‰œë‹¤.

- ë Œë”ë§ : ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ í™”ë©´ì— ë¬´ì—‡ì´ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ”ì§€ íŒŒì•…í•œë‹¤.
  - ë Œë”ë§ ì¤‘ì—ëŠ” DOM ë…¸ë“œê°€ ì•„ì§ ìƒì„±ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ref.currentëŠ” nullì´ë‹¤.
- ì»¤ë°‹ : ReactëŠ” DOMì— ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•œë‹¤.
  - ì»¤ë°‹ ë‹¨ê³„ì—ì„œ ref.currentë¥¼ ì„¤ì •í•œë‹¤.
  - DOMì´ ì—…ë°ì´íŠ¸ëœ ì§í›„ í•´ë‹¹ DOM ë…¸ë“œë¥¼ ë‹¤ì‹œ ì„¤ì •í•œë‹¤.

## stateë¥¼ ë™ê¸°ì‹ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸°

ì•„ë˜ ì˜ˆì œì—ì„œ todo ëª©ë¡ì´ ì¶”ê°€ë˜ë©´ ì¶”ê°€ëœ ë…¸ë“œë¡œ ìŠ¤í¬ë¡¤ì´ ì´ë™ë˜ê²Œ í•˜ê³ ì í•œë‹¤.

```jsx
import { useState, useRef } from "react";

export default function TodoList() {
  const listRef = useRef(null);
  const [text, setText] = useState("");
  const [todos, setTodos] = useState(initialTodos);

  function handleAdd() {
    const newTodo = { id: nextId++, text: text };
    setText("");
    setTodos([...todos, newTodo]);
    listRef.current.lastChild.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
    });
  }

  return (
    <>
      <button onClick={handleAdd}>Add</button>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <ul ref={listRef}>
        {todos.map((todo) => (
          <li key={todo.id}>{todo.text}</li>
        ))}
      </ul>
    </>
  );
}

let nextId = 0;
let initialTodos = [];
for (let i = 0; i < 20; i++) {
  initialTodos.push({
    id: nextId++,
    text: "Todo #" + (i + 1),
  });
}
```

- ê²°ê³¼ëŠ” ì¶”ê°€ëœ ë…¸ë“œìœ„ì¹˜ê°€ ì•„ë‹Œ ê·¸ ì´ì „ ìƒíƒœì˜ ë§ˆì§€ë§‰ ë…¸ë“œë¡œ ì´ë™ëœë‹¤.
- stateëŠ” DOMì„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
setTodos([...todos, newTodo]);
listRef.current.lastChild.scrollIntoView();
```

- setTodosëŠ” ì—…ë°ì´íŠ¸ ëœ í›„ ì¬ë Œë”ë§ìœ¼ë¡œ ë…¸ë“œë¥¼ ì¶”ê°€í•œë‹¤.
- scrollIntoView()ëŠ” ì—…ë°ì´íŠ¸ ë‹¨ê³„ì—ì„œ ì§„í–‰ì´ ë˜ë²„ë¦°ë‹¤.
- **`flushSync`ë¡œ state ì—…ë°ì´íŠ¸ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.**

```jsx
import { useState, useRef } from "react";
import { flushSync } from "react-dom";

export default function TodoList() {
  const listRef = useRef(null);
  const [text, setText] = useState("");
  const [todos, setTodos] = useState(initialTodos);

  function handleAdd() {
    const newTodo = { id: nextId++, text: text };
    flushSync(() => {
      setText("");
      setTodos([...todos, newTodo]);
    });
    listRef.current.lastChild.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
    });
  }

  return (
    <>
      <button onClick={handleAdd}>Add</button>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <ul ref={listRef}>
        {todos.map((todo) => (
          <li key={todo.id}>{todo.text}</li>
        ))}
      </ul>
    </>
  );
}

let nextId = 0;
let initialTodos = [];
for (let i = 0; i < 20; i++) {
  initialTodos.push({
    id: nextId++,
    text: "Todo #" + (i + 1),
  });
}
```

## refë¥¼ ì´ìš©í•œ DOM ì¡°ì‘ ëª¨ë²” ì‚¬ë¡€

- Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ë…¸ë“œë¥¼ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤.
- Reactê°€ ì—…ë°ì´íŠ¸í•  ì´ìœ ê°€ ì—†ëŠ” DOMì˜ ì¼ë¶€ëŠ” ì•ˆì „í•˜ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

</br>

# Effectì™€ ë™ê¸°í™” í•˜ê¸°

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•œë‹¤.

- React stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ Reactê°€ ì•„ë‹Œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í• ë–„
- ì„œë²„ ì—°ê²°ì„ ì„¤ì •í• ë•Œ
- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚¼ë•Œ

> Effectë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ ì´í›„ ì¼ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìœ¼ë©° ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆë‹¤.

## Effectë€ ë¬´ì—‡ì´ë©° ì´ë²¤íŠ¸ì™€ëŠ” ì–´ë–¤ê²Œ ë‹¤ë¥¸ê°€

ReactëŠ” ë‘ê°€ì§€ ì‘ì—… ìœ í˜•ì´ ì¡´ì¬í•œë‹¤.

- ë Œë”ë§ : propsì™€ stateë¥¼ ê°€ì ¸ì™€ JSXë¥¼ ë°˜í™˜
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ : ì‚¬ìš©ì ì‘ì—…ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸

> EffectëŠ” ì‚¬ìš©ì ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ìì²´ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤.  
> ex. ì„œë²„ ì—°ê±¸

## Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.

EffectëŠ” ì¼ë°˜ì ìœ¼ë¡œ React ì½”ë“œì—ì„œ ë²—ì–´ë‚˜ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.  
Effectê°€ ì•„ë‹Œ ë‹¤ë¥¸ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¼ë¶€ stateë§Œì„ ì¡°ì •í•˜ëŠ” ê²½ìš°, Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.

## Effect ì‘ì„±ë°©ë²•

### 1. Effect ì„ ì–¸

```jsx
import { useEffect } from "react";

function MyComponent() {
  useEffect(() => {
    // Code here will run after *every* render
    // ì—¬ê¸°ì˜ ì½”ë“œëŠ” ë§¤ ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
  });
  return <div />;
}
```

- ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ReactëŠ” í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ê³  useEffect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.
- ì¦‰, useEffectëŠ” í•´ë‹¹ ë Œë”ë§ì´ í™”ë©´ì— ë°˜ì˜ì´ ë  ë•Œê¹Œì§€ ì½”ë“œ ì¡°ê°ì˜ ì‹¤í–‰ì„ â€œì§€ì—°â€í•œë‹¤.

```jsx
import { useState, useRef, useEffect } from "react";

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? "Pause" : "Play"}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

- VideoPlayerëŠ” Appìœ¼ë¡œ ë¶€í„° ì¬ìƒì—¬ë¶€ propsë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
- Effect ì—†ì´ ì „ë‹¬ë°›ì€ props isPlayingìœ¼ë¡œ ë™ì˜ìƒì„ ì»¨íŠ¸ë¡¤í•˜ë ¤ê³  í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- ì•„ì§ VideoPlayerì˜ ëª¨ë“  DOMì´ ë Œë”ë§ë˜ì§€ ì•Šì•˜ëŠ”ë°, ì¬ìƒ ì—¬ë¶€ë¥¼ ë¬»ê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
if (isPlaying) {
  ref.current.play(); // Calling these while rendering isn't allowed.
} else {
  ref.current.pause(); // Also, this crashes.
}
```

> useEffectëŠ” ëª¨ë“  ë Œë”ë§ì´ ì¼ì–´ë‚œ í›„ì— ë°œìƒí•˜ê¸°ì— ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ì¤€ë‹¤.

### 2. Effect ì˜ì¡´ì„± ì§€ì •í•˜ê¸°

- ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” `ë§¤ë²ˆ` ë Œë”ë§ í›„ì— ì‹¤í–‰ëœë‹¤.
- íŠ¹ì •í•œ ê²½ìš°ì—ë§Œ Effectê°€ ì¼ì–´ë‚˜ê²Œ í•˜ê¸°ìœ„í•´ì„œëŠ” ì˜ì¡´ì„±ì„ ì§€ì •í•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  // This runs after every render
  // ë Œë”ì‹œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
});

useEffect(() => {
  // This runs only on mount (when the component appears)
  // ì˜¤ì§ ë§ˆìš´íŠ¸ì‹œ(ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œ)ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
}, []);

useEffect(() => {
  // This runs on mount *and also* if either a or b have changed since the last render
  // ë§ˆìš´íŠ¸ì‹œ ë¿ë§Œ ì•„ë‹ˆë¼ a ë˜ëŠ” bê°€ ì§ì „ ë Œë”ì™€ ë‹¬ë¼ì¡Œì„ ë•Œì—ë„ ì‹¤í–‰ë©ë‹ˆë‹¤.
}, [a, b]);
```

- ì˜ì¡´ì„± ë°°ì—´ì€ ì—¬ëŸ¬ ê°œì˜ ì˜ì¡´ì„±ì„ í¬í•¨í•  ìˆ˜ ìˆë‹¤.

### 3. í•„ìš”í•œ ê²½ìš° í´ë¦°ì—…ì„ ì¶”ê°€í•œë‹¤.

ì±„íŒ… ì„œë²„ì— ì—°ê²°í•´ì•¼ í•œëŠ ChatRoom ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ì.

```jsx
import { useEffect } from "react";
import { createConnection } from "./chat.js";

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}

export function createConnection() {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log("âœ… Connecting...");
    },
    disconnect() {
      console.log("âŒ Disconnected.");
    },
  };
}
```

- ë§ˆìš´íŠ¸ë•Œ ì„œë²„ë¥¼ ì—°ê²°í•œë‹¤.
- **ì—¬ê¸°ì„œ ë¬¸ì œëŠ” ë§ˆìš´íŠ¸ ë§ˆë‹¤ ì„œë²„ì— ì—°ê²°í•œë‹¤ëŠ” ê²ƒì´ë‹¤.**
- ì–¸ë§ˆìš´íŠ¸ì‹œ ì—†ì—ì•¼ í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤.

```jsx
export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
```

> **ğŸ’¡ useEffectì—ì„œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ í˜¸ì¶œë˜ëŠ” í´ë¦°ì—… í•¨ìˆ˜ë‹¤.**
>
> - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
> - ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì·¨ì†Œ
> - íƒ€ì´ë¨¸ í•´ì²´

â“ ë¡œê·¸ì¸ ì—„ê²©ëª¨ë“œ ë¬¸ì œ ì´ê±¸ë¡œ....?

## ê°œë°œ í™˜ê²½ì—ì„œ ë‘ ë²ˆì”© ì‹¤í–‰ë˜ëŠ” Effectë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œ?

- ReactëŠ” ê°œë°œ í™˜ê²½ì—ì„œ ë²„ê·¸ë¥¼ ì°¾ê¸° ìœ„í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ë„ì ìœ¼ë¡œ ë‹¤ì‹œ ë‹¤ìš´íŠ¸ í•œë‹¤.
- ì–´ë–»ê²Œ í•˜ë©´ Effectë¥¼ í•œ ë²ˆë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ê°€? ê°€ ì•„ë‹Œ
- **ì–´ë–»ê²Œ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•œ í›„ì—ë„ Effectê°€ ì˜ ì‘ë™í•˜ë„ë¡ ìˆ˜ì •í•˜ëŠ”ê°€?** ì´ë‹¤.

> í´ë¦°ì—… í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤. í´ë¦°ì—… í•¨ìˆ˜ëŠ” Effectê°€ ìˆ˜í–‰ ì¤‘ì´ë˜ ì‘ì—…ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ì·¨ì†Œí•´ì•¼ í•œë‹¤.

### Reactê°€ ì•„ë‹Œ ìœ„ì ¯ ì œì–´í•˜ê¸°

- ì§€ë„ì™€ ê°™ì€ UI ìœ„ì ¯ì€ Reactë¡œ ì‘ì„±í•˜ì§€ ì•Šì€ ê²½ìš°ë‹¤.
- ì§€ë„ì˜ í™•ëŒ€/ì¶•ì†Œë¥¼ state ë³€ìˆ˜ì™€ ë™ê¸°í™”í•œë‹¤.

```jsx
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

- ì´ ê²½ìš°ì—ëŠ” í´ë¦°ì—…ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.
- ë‘ë²ˆ í˜¸ì¶œí•´ë„ ì•„ë¬´ëŸ¬ ë¬¸ì œê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
- ë”ìš±ì´ ìƒìš© í™˜ê²½ì—ì„œëŠ” ë¶ˆí•„ìš”í•˜ê²Œ ë‹¤ì‹œ ë§ˆìš´íŠ¸ ë˜ì§€ ì•ŠëŠ”ë‹¤.

ì•„ë˜ì˜ ê²½ìš°ëŠ” ë‘ ë²ˆ ì—°ì†ìœ¼ë¡œ í˜¸ì¶œí•˜ë©´ ì•ˆëœë‹¤.

```jsx
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

- ë¸Œë¼ìš°ì € ë¹ŒíŠ¸ì¸ ìš”ì†Œì¸ `<dialog>`ëŠ” `showModal()`ë¥¼ ë‘ë²ˆ í˜¸ì¶œí•˜ë©´ ì—ì–´ê°€ ë°œìƒí•œë‹¤.
- ê°œë°œ ì¤‘ì— EffectëŠ” showModal()ì„ í˜¸ì¶œí•œ ë‹¤ìŒ ì¦‰ì‹œ close()ë¥¼ í˜¸ì¶œí•˜ê³ , ë‹¤ì‹œ showModal()ì„ í˜¸ì¶œí•œë‹¤.
- ì´ëŠ” ìƒìš© í™˜ê²½ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ showModal()ì„ í•œ ë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ì²´ê°ìƒ ë™ì¼í•˜ë‹¤.

### ì´ë²¤íŠ¸ êµ¬ë…í•˜ê¸°

- Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•˜ëŠ” ê²½ìš°, í´ë¦°ì—… í•¨ìˆ˜ëŠ” êµ¬ë…ì„ ì·¨ì†Œí•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener("scroll", handleScroll);
  return () => window.removeEventListener("scroll", handleScroll);
}, []);
```

- ê°œë°œ ì¤‘ì— EffectëŠ” addEventListener()ë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒ ì¦‰ì‹œ removeEventListener()ë¥¼ í˜¸ì¶œí•œë‹¤. - ê·¸ëŸ° ë‹¤ìŒ ë™ì¼í•œ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì‹œ addEventListener()ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, í•œ ë²ˆì— í•˜ë‚˜ì˜ êµ¬ë…ë§Œ í™œì„±í™” ë˜ë„ë¡ í•œë‹¤.
- ì´ëŠ” ìƒìš© í™˜ê²½ì—ì„œ addEventListener()ë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ì²´ê°ìƒ ë™ì¼í•œë‹¤.

### ì• ë‹ˆë©”ì´ì…˜ ì´‰ë°œí•˜ê¸°

- Effectê°€ ë¬´ì–¸ê°€ë¥¼ ì• ë‹ˆë©”ì´ì…˜í•˜ëŠ” ê²½ìš° í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸°ê°’ìœ¼ë¡œ ì¬ì„¤ì •í•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
  // ì• ë‹ˆë©”ì´ì…˜ ì´‰ë°œ
  return () => {
    node.style.opacity = 0; // Reset to the initial value
    // ì´ˆê¸°ê°’ìœ¼ë¡œ ì¬ì„¤ì •
  };
}, []);
```

- ë§Œì•½ íŠ¸ìœ„ë‹ì„ ì§€ì›í•˜ëŠ” ì„œë“œíŒŒí‹° ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´, í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ íƒ€ì„ë¼ì¸ì„ ì´ˆê¸° stateë¡œ ì¬ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.

### ë°ì´í„° í˜ì¹­í•˜ê¸°

- Effectê°€ ë¬´ì–¸ê°€ë¥¼ í˜ì¹˜í•˜ë©´ í´ë¦°ì—… í•¨ìˆ˜ëŠ” í˜ì¹˜ë¥¼ ì¤‘ë‹¨í•˜ê±°ë‚˜ ê·¸ ê²°ê³¼ë¥¼ ë¬´ì‹œí•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

- ì´ë¯¸ ë°œìƒí•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ "ì‹¤í–‰ ì·¨ì†Œ" í•  ìˆ˜ëŠ” ì—†ë‹¤.
- í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ ë” ì´ìƒ `ê´€ë ¨ì´ ì—†ëŠ” í˜ì¹˜`ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê³„ì† ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤.
- userIdê°€ 'Alice'ì—ì„œ 'Bob'ìœ¼ë¡œ ë³€ê²½ë˜ë©´ í´ë¦°ì—…ì€ 'Alice' ì‘ë‹µì´ 'Bob' ì´í›„ì— ë„ì°©í•˜ë”ë¼ë„ ì´ë¥¼ ë¬´ì‹œí•˜ë„ë¡ í•œë‹¤.

> ìƒìš© í™˜ê²½ì—ì„œëŠ” ìš”ì²­ì´ í•˜ë‚˜ë§Œ ìˆë‹¤. ê°œë°œ ì¤‘ì¸ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê·€ì°®ì€ ê²½ìš° ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìš”ì²­ì„ ì¤‘ë³µ ì œê±°í•˜ê³  ì»´í¬ë„ŒíŠ¸ ê°„ì— ì‘ë‹µì„ `ìºì‹œí•˜ëŠ” ì†”ë£¨ì…˜`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

### ë¶„ì„ ë³´ë‚´ê¸°

```jsx
useEffect(() => {
  logVisit(url); // Sends a POST request
}, [url]);
```

### Effectê°€ ì•„ë‹Œ ê²½ìš° : ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”í•˜ê¸°

- ì¼ë¶€ ë¡œì§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤.
- ì´ëŸ° ë¡œì§ì€ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ë„£ì„ ìˆ˜ ìˆë‹¤.

```jsx
if (typeof window !== "undefined") {
  // Check if we're running in the browser.
  // ì‹¤í–‰í™˜ê²½ì´ ë¸Œë¼ìš°ì €ì¸ì§€ ì—¬ë¶€ í™•ì¸
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

### Effectê°€ ì•„ë‹Œ ê²½ìš° : ì œí’ˆ êµ¬ë§¤í•˜ê¸°

```jsx
useEffect(() => {
  // ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.
  // ğŸ”´ í‹€ë ¸ìŠµë‹ˆë‹¤: ì´ EffectëŠ” ê°œë°œëª¨ë“œì—ì„œ ë‘ ë²ˆ ì‹¤í–‰ë˜ë©°, ë¬¸ì œë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤.
  fetch("/api/buy", { method: "POST" });
}, []);
```

- ì œí’ˆì„ ë‘ ë²ˆ ì‚¬ë©´ ì•ˆëœë‹¤.
- ì´ ë¡œì§ì€ Effectì—ì„œ ì œê±°ë˜ì–´ì•¼ í•œë‹¤.
- êµ¬ë§¤ëŠ” ë Œë”ë§ìœ¼ë¡œ ì¸í•œ ê²ƒì´ ì•„ë‹ˆë‹¤. `íŠ¹ì • ìƒí˜¸ ì‘ìš©`ìœ¼ë¡œ ì¸í•´ ë°œìƒí•œë‹¤.

```jsx
function handleClick() {
  // âœ… Buying is an event because it is caused by a particular interaction.
  // âœ… êµ¬ë§¤ëŠ” íŠ¹ì • ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ë¯€ë¡œ ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.
  fetch("/api/buy", { method: "POST" });
}
```

## ìš”ì•½

- ì´ë²¤íŠ¸ì™€ ë‹¬ë¦¬ EffectëŠ” íŠ¹ì • ìƒí˜¸ ì‘ìš©ì´ ì•„ë‹Œ ë Œë”ë§ ìì²´ì— ì˜í•´ ë°œìƒí•©ë‹ˆë‹¤.
- Effectë¥¼ ì‚¬ìš©í•˜ë©´ ì¼ë¶€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ì„œë“œíŒŒí‹° API, ë„¤íŠ¸ì›Œí¬ ë“±)ê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ëª¨ë“  ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤(ì´ˆê¸° ë Œë”ë§ í¬í•¨).
- ReactëŠ” ëª¨ë“  ì˜ì¡´ì„±ì´ ë§ˆì§€ë§‰ ë Œë”ë§ ì‹œì ê³¼ ë™ì¼í•œ ê°’ì„ ê°–ëŠ” ê²½ìš° Effectë¥¼ ê±´ë„ˆëœë‹ˆë‹¤.
- ì˜ì¡´ì„±ì„ â€œì„ íƒâ€í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ Effect ë‚´ë¶€ì˜ ì½”ë“œì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.
- ë¹ˆ ì˜ì¡´ì„± ë°°ì—´([])ì€ ì»´í¬ë„ŒíŠ¸ â€œë§ˆìš´íŒ…â€, ì¦‰,í™”ë©´ì— ì¶”ê°€ë˜ëŠ” ì‹œì ì— ëŒ€ì‘í•©ë‹ˆë‹¤.
- Strict ëª¨ë“œì—ì„œ ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë‘ ë²ˆ ë§ˆìš´íŠ¸í•˜ì—¬(ê°œë°œ ì¤‘ì¸ ê²½ìš°ì—ë§Œ!) Effectë¥¼ ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
- ë‹¤ì‹œ ë§ˆìš´íŠ¸ë¥¼ ìˆ˜í–‰í•¨ìœ¼ë¡œ ì¸í•´ Effectê°€ ê¹¨ì§€ëŠ” ê²½ìš°, í´ë¦°ì—… í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
- ReactëŠ” ë‹¤ìŒ Effectê°€ ì‹¤í–‰ë˜ê¸° ì „ ë° ë§ˆìš´íŠ¸ í•´ì œ ì‹œì ì— í´ë¦°ì—… í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
